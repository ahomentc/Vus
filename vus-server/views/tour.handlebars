  <head>
    <meta charset="utf-8">
    <title>14 Octavus, Irvine, CA</title>
    <meta name="description" content="Dev Example â€” Networked-Aframe">
    <script src="js/aframe.min.js"><{{!}}/script>

    {{! https://stackoverflow.com/questions/52484201/how-to-load-local-js-file-into-hbs-via-script-rel-handlebars }}

    <script src="js/movement-controls.js"><{{!}}/script>
    <script src="js/touch-controls.js"><{{!}}/script>
    <script src="js/trackpad-controls.js"><{{!}}/script>
    <script src='js/kinematic-body.js'><{{!}}/script>
    <script src="//unpkg.com/aframe-animation-component@4.1.2/dist/aframe-animation-component.min.js"><{{!}}/script>
    <script src="https://unpkg.com/aframe-event-set-component@^4.0.0/dist/aframe-event-set-component.min.js"><{{!}}/script>
    <script src="js/aframe-stereo-component.min.js"><{{!}}/script>
    <script src="js/tour_movement.js"><{{!}}/script>
  </head>

  <style>
    .navbar{
      display: none;
    }
  </style>

  <script>
    var username   = '{{username}}'
    var env_name   = '{{env_name}}'
    var num_images = '{{num_images}}'
    var labels     = "{{labels}}"

    function getCookie(cname) {
      var name = cname + "=";
      var decodedCookie = decodeURIComponent(document.cookie);
      var ca = decodedCookie.split(';');
      for(var i = 0; i <ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
          c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
          return c.substring(name.length, c.length);
        }
      }
      return "";
    }

    var localCode = getCookie('headsetLocalCode')
    setInterval(function(){ 
        if(localCode){
            $.post("/getHeadsetMessage",
            {
                code: localCode,
            }, function(data, status){
                if(data != null && data != "/tour?username=0&name=0" && window.location.href.includes(data) == false){
                    window.location.href = data;
                }
                else if (data == "/tour?username=0&name=0" || data == null) {
                    window.location.href = "/vr"
                }
            });
        }
    }, 5000);

  <{{!}}/script>

  <body style="background-color: black">

    <a-scene antialias="true" load_tour="num_images: {{num_images}}">
      <a-assets>

        <img id="black" src="room/showcase/tour/assets/black.jpg" />
        <img id="frame1L" crossorigin="anonymous" src='https://d3ga0cb3khynzt.cloudfront.net/{{username}}/{{env_name}}/left/1.jpg' />
        <img id="frame1R" crossorigin="anonymous" src='https://d3ga0cb3khynzt.cloudfront.net/{{username}}/{{env_name}}/right/1.jpg' />

        <!-- Templates -->

        <!-- Avatar -->
        <template id="player-template">
          <a-entity></a-entity>
        </template>

        <!-- Avatar -->
        <template id="head-template">
          <a-entity class="avatar">
            <a-asset-item id="left-controller-obj" src="assets/controllers/left.obj"></a-asset-item>
            <a-asset-item id="left-controller-mtl" src="assets/controllers/left.mtl"></a-asset-item>
            <a-asset-item id="right-controller-obj" src="assets/controllers/right.obj"></a-asset-item>
            <a-asset-item id="right-controller-mtl" src="assets/controllers/right.mtl"></a-asset-item>
          </a-entity>
        </template>

        <!-- Hand -->
        <template id="hand-template">
          <a-entity>
            <a-entity obj-model="obj: #left-controller-obj; mtl: #left-controller-mtl"></a-entity>
            </a-entity>
          </a-entity>
        </template>

        <!-- /Templates -->
      </a-assets>


      <a-entity id="scene_rotator">
          <a-camera id="camera" rotation="180 0 0" move_mobile menu stereocam="eye:left" look-controls cursor="rayOrigin: mouse">
              <a-cursor material="color:#ffffff" visible="false"></a-cursor>
              <a-sphere class="head"
                random-color
                visible="false"
              ></a-sphere>
              <a-sky id='transition_sphere' src="#black" radius=".1"  visible='false' animation__fadein="startEvents: fadein; property: material.opacity; from: 0; to: 1; dur: 600;"
           animation__fadeout="startEvents: fadeout; property: material.opacity; from: 1; to: 0; dur: 600;"></a-sky>
          </a-camera>
      </a-entity>

      <a-entity id="left_hand"
                obj-model="obj: #left-controller-obj; mtl: #left-controller-mtl"
                if-no-vr-headset="visible: false" 
                rotation="-7.105 74.714 0" 
                position="0 1.4 0" 
                hand-controls="left"></a-entity>

      <a-entity id="right_hand"
                obj-model="obj: #right-controller-obj; mtl: #right-controller-mtl"
                if-no-vr-headset="visible: false" 
                rotation="-7.105 74.714 0" 
                position="0 1.4 0" 
                laser-controls="hand: right" 
                hand-controls="right"
                raycaster="far: 9"
                line="color: white; opacity: 1"></a-entity>

      
      <a-sky id="left_pic" src="#frame1L" rotation='0 180 0' stereo="eye:left"></a-sky> 
      <a-sky id="right_pic" src="#frame1R" rotation='0 0 0' stereo="eye:right"></a-sky>

      <a-plane position="10 -4 5.741" id="line" width="2" height="1" material="color:#ffffff" rotation="0 270 0" scale="5.751 1 1" geometry="height:0.04"></a-plane>
      <a-plane position="-10 -4 5.741" id="line-2" width="2" height="1" material="color:#ffffff" rotation="0 90 0" scale="5.751 1 1" geometry="height:0.040000000000000036"></a-plane>
      <a-plane position="0 -4 11.503" id="line-3" width="2" height="1" material="color:#ffffff" rotation="0 180 0" geometry="height:0.05;width:20"></a-plane>
      <a-plane position="10 46 11.503" id="line-4" width="2" height="1" material="color:#ffffff" rotation="0 180 90" geometry="width:100;height:0.05"></a-plane>
      <a-plane position="-10 46 11.503" id="line-5" width="2" height="1" material="color:#ffffff" rotation="0 180 90" geometry="height:0.05;width:100"></a-plane>

    </a-scene>

  </body>




